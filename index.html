<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>日向坂46 動画・ニュース・ブログまとめ</title>
  <meta name="description" content="日向坂46の最新YouTube動画、ニュース、ブログ情報をまとめてチェックできるファン向けサイトです。">
  <meta name="keywords" content="日向坂46, 日向坂ちゃんねる, YouTube, ニュース, ブログ, 動画">
  <style>
    body { font-family: 'Arial', sans-serif; background: #f9f9f9; margin: 0; padding: 0; color: #333; }
    header { background: #1e90ff; color: white; padding: 1rem; text-align: center; }
    nav { display: flex; justify-content: center; gap: 1rem; background: #e0e0e0; padding: 1rem; flex-wrap: wrap; }
    nav button { padding: 0.5rem 1rem; border: none; background: #fff; cursor: pointer; border-radius: 5px; }
    nav button.active { background: #1e90ff; color: white; }
    .container { max-width: 960px; margin: 2rem auto; padding: 1rem; }
    .video, .news-item, .blog-item { margin-bottom: 2rem; }
    iframe { width: 100%; height: 315px; border: none; }
    h2 { color: #1e90ff; }
    .filters { margin: 1rem 0; }
    .filters label, .filters input, .filters select { margin-right: 1rem; }
    .news-item a, .blog-item a { color: #1e90ff; text-decoration: none; }
  </style>
</head>
<body>

<header>
  <h1>日向坂46 動画・ニュース・ブログまとめ</h1>
</header>

<nav>
  <button class="tab-button active" data-channel="official">日向坂46 OFFICIAL</button>
  <button class="tab-button" data-channel="channeru">日向坂ちゃんねる</button>
</nav>

<div class="container">
  <div class="filters">
    <label for="sort">並び順:</label>
    <select id="sort">
      <option value="newest">新しい順</option>
      <option value="oldest">古い順</option>
    </select>
    <label for="filterDate">日付で絞り込み:</label>
    <input type="date" id="filterDate">
  </div>

  <section id="videos"></section>

  <h2>日向坂関連ニュース</h2>
  <section id="news" class="news">読み込み中...</section>

  <h2>日向坂ブログ</h2>
  <section id="blog" class="blog">読み込み中...</section>
</div>

<script>
const channels = {
  official: 'https://www.youtube.com/feeds/videos.xml?channel_id=UCR0V48DJyWbwEAdxLL5FjxA',
  channeru: 'https://www.youtube.com/feeds/videos.xml?channel_id=UCOB24f8lQBCnVqPZXOkVpOg'
};

const rssToJsonApi = 'https://api.rss2json.com/v1/api.json?rss_url=';
let currentChannel = 'official';

function fetchVideos(channelKey) {
  const feedUrl = `${rssToJsonApi}${encodeURIComponent(channels[channelKey])}`;
  fetch(feedUrl)
    .then(res => res.json())
    .then(data => {
      let videos = data.items;

      // フィルターとソート
      const filterDate = document.getElementById('filterDate').value;
      const sort = document.getElementById('sort').value;

      if (filterDate) {
        videos = videos.filter(video => video.pubDate.startsWith(filterDate));
      }

      videos.sort((a, b) => sort === 'newest' ? new Date(b.pubDate) - new Date(a.pubDate) : new Date(a.pubDate) - new Date(b.pubDate));

      const container = document.getElementById('videos');
      container.innerHTML = `<h2>${channelKey === 'official' ? '日向坂46 OFFICIAL' : '日向坂ちゃんねる'}の動画</h2>`;

      videos.forEach(video => {
        const videoId = video.link.split('=')[1];
        container.innerHTML += `
          <div class="video">
            <h3>${video.title}</h3>
            <iframe src="https://www.youtube.com/embed/${videoId}" allowfullscreen></iframe>
            <p>公開日: ${new Date(video.pubDate).toLocaleDateString()}</p>
          </div>
        `;
      });
    });
}

function fetchNews() {
  const newsFeed = 'https://news.google.com/rss/search?q=日向坂46&hl=ja&gl=JP&ceid=JP:ja';
  fetch(`${rssToJsonApi}${encodeURIComponent(newsFeed)}`)
    .then(res => res.json())
    .then(data => {
      const news = data.items;
      const container = document.getElementById('news');
      container.innerHTML = '';

      news.forEach(item => {
        container.innerHTML += `
          <div class="news-item">
            <a href="${item.link}" target="_blank">${item.title}</a><br>
            <small>${new Date(item.pubDate).toLocaleDateString()}</small>
          </div>
        `;
      });
    });
}

function fetchBlog() {
  const blogFeed = 'https://www.hinatazaka46.com/s/official/diary/member/rss';
  fetch(`${rssToJsonApi}${encodeURIComponent(blogFeed)}`)
    .then(res => res.json())
    .then(data => {
      const blogs = data.items;
      const container = document.getElementById('blog');
      container.innerHTML = '';

      blogs.forEach(item => {
        container.innerHTML += `
          <div class="blog-item">
            <a href="${item.link}" target="_blank">${item.title}</a><br>
            <small>${new Date(item.pubDate).toLocaleDateString()}</small>
          </div>
        `;
      });
    });
}

// イベントリスナー

document.querySelectorAll('.tab-button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentChannel = btn.dataset.channel;
    fetchVideos(currentChannel);
  });
});

document.getElementById('sort').addEventListener('change', () => fetchVideos(currentChannel));
document.getElementById('filterDate').addEventListener('change', () => fetchVideos(currentChannel));

// 初期ロード
fetchVideos(currentChannel);
fetchNews();
fetchBlog();
</script>

</body>
</html>
